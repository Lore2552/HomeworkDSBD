events {}

http {
    upstream user_manager {
        server user-manager:5000;
    }

    upstream data_collector {
        server data-collector:5001;
    }

    server {
        listen 80;

        # User Manager Routes
        location /addUser {
            proxy_pass http://user_manager;
        }
        location /deleteUser {
            proxy_pass http://user_manager;
        }
        location /users {
            proxy_pass http://user_manager;
        }
        location /messageIds {
            proxy_pass http://user_manager;
        }
        location /removeAirportInterest {
            proxy_pass http://user_manager;
        }

        # Data Collector Routes
        location /register_airports {
            proxy_pass http://data_collector;
        }
        location /states/all {
            proxy_pass http://data_collector;
        }
        location /flights {
            proxy_pass http://data_collector;
        }
        location /airports/ {
            proxy_pass http://data_collector;
        }
        location /collect_flights {
            proxy_pass http://data_collector;
        }
        location /usersinterests {
            proxy_pass http://data_collector;
        }
    }
}
